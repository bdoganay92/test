---
title: 'Preparatory Steps and Work Environment'
author: ""
date: '`r format(Sys.Date(), "%B %d, %Y")`'
output:
  pdf_document:
    fig_caption: yes
    number_sections: yes
geometry: margin=1in
urlcolor: magenta
---


```{r global_options, include=FALSE}
knitr::opts_chunk$set(tidy = TRUE, message = FALSE, warning = FALSE)
knitr::opts_chunk$set(fig.pos = 'H')
```


```{r, echo = FALSE, warning = FALSE}
library(rmarkdown)
library(knitr)
library(kableExtra)
library(formatR)
```

# Preparatory steps
Download the Github repository https://github.com/jamieyap/CountSMART and save contents to a folder named CountSMART on your machine. Prior to performing calculations, let us first set up our work environment. Run the following lines of code in an R console:

```{r}
# Creates or reads existing user-specific .Renviron file
user.renviron = path.expand(file.path("~", ".Renviron")) 

# Opens user-specific .Renviron file
file.edit(user.renviron)
```

After running this, an `.Renviron` file will pop up. Specify the location of the folder for input data, output data, and code. For example on a machine running on a Windows OS, to reproduce example 1 when $\tau_{MAX}=0.75$, specify the following in the .Renviron file

\begin{verbatim}
path.input_data = "~/CountSMART/run-examples/dat-example-01a"
path.output_data = "~/CountSMART/run-examples/output-example-01a"
path.code = "~/CountSMART/code"
\end{verbatim}
\vspace{0.5cm}

while to reproduce example 1 when $\tau_{MAX}=0.10$, specify the following in the .Renviron file

\begin{verbatim}
path.input_data = "~/CountSMART/run-examples/dat-example-01b"
path.output_data = "~/CountSMART/run-examples/output-example-01b"
path.code = "~/CountSMART/code"
\end{verbatim}
\vspace{0.5cm}

In the above, replace $~$ with the path where the CountSMART folder is stored.

Now, restart R so that these paths can be loaded into R's namespace. 

# List of packages used

* `dplyr`
* `purrr`
* `assertthat`
* `rootSolve`
* `mvtnorm`
* `geeM`
* `parallel`
* `ggplot2`


# Display session information

To facilitate reproducibility, we display details on the set-up of our work environment when running power calculation computations in illustrative examples below.

```{r, echo=FALSE}
path.code <- Sys.getenv("path.code")

library(dplyr)
library(purrr)
library(assertthat)
library(rootSolve)
library(mvtnorm)
library(geeM)
library(parallel)
library(ggplot2)

source(file.path(path.code,"input-utils.R"))
source(file.path(path.code,"datagen-utils.R"))
source(file.path(path.code,"analysis-utils.R"))
```


```{r}
sessionInfo()
```